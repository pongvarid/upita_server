(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f269e50"],{"21d1":function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));a("96cf");var r=a("1da1"),n=a("d4ec"),s=a("bee2"),i=a("262e"),u=a("2caf"),c=a("9ab4"),l=a("8d27"),o=a("dcc8"),p=a("0613"),f=function(e){Object(i["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.user=null,e.permission=null,e.routeUser="/",e}return Object(s["a"])(a,[{key:"autoCreateProfile",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o["a"].postHttp("/api/profile/create/",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getHttp("/api/ita/v2/user/");case 2:t=e.sent,this.user=t,this.permission=t.is_staff,1==t.is_staff||0==t.is_staff?this.routeUser=t.is_staff?"/admin/":"/user/":this.routeUser="/";case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getHttp("/api/ita/v2/user/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(l["b"]);f=Object(c["c"])([Object(l["a"])({generateMutationSetters:!0})],f);var v=new f({store:p["a"],name:"User"})},2622:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative md:pt-32 pb-32 pt-12  ",staticStyle:{"z-index":"1"}},[a("div",{staticClass:"relative  flex flex-col min-w-0 break-words w-full mb-6  "},[e.response?a("div",{staticClass:"rounded-t mb-0 px-4 py-3 border-0 "},[e._m(0)]):e._e()])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative w-full mt-4 mb-4 max-w-full flex-grow flex-1 px-2 py-2"},[a("h3",{staticClass:"  text-2xl text-gray-800"},[a("span",{staticClass:"em em-briefcase text-2xl",attrs:{"aria-role":"presentation","aria-label":""}}),e._v(" รายงาน IIT ")])])}],s=(a("99af"),a("a9e3"),a("b680"),a("96cf"),a("1da1")),i=a("d4ec"),u=a("bee2"),c=a("262e"),l=a("2caf"),o=a("9ab4"),p=a("60a3"),f=a("b14a"),v=a("dcc8"),h=a("21d1"),g=a("5d53"),d=a("2ef0"),b=a.n(d),m=function(e){Object(c["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.agency=null,e.response=!1,e}return Object(u["a"])(a,[{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.run();case 2:this.response=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"run",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].getUser();case 2:return this.user=e.sent,e.next=5,v["a"].getHttp("/api/ita/v1/agency/");case 5:this.agency=e.sent;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateReport",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.agency.length)){e.next=9;break}return e.next=4,this.IITGenerate(this.agency[t]);case 4:a=e.sent,console.log(a);case 6:t++,e.next=1;break;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"IITGenerate",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,s,i,u,c,l,o,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getHttp("/api/iit/v2/assessmentissues/?&year=1");case 2:a=e.sent,r=0;case 4:if(!(r<a.length)){e.next=25;break}return e.next=7,v["a"].getHttp("/api/iit/v2/answerissue-report/?agency=".concat(t.id,"&assessmentIssues=").concat(a[r].id));case 7:return n=e.sent,e.next=10,v["a"].groupBy(n,"user");case 10:return s=e.sent,i=s.length,e.next=14,g["a"].groupIssueRaw(n,i,t.count);case 14:for(u=e.sent,0,c=0,l=0,o=0;o<u.length;o++)p=this.sumScore(u[o].value),c+=Number(p),l++;return f=Number((c/l*.3).toFixed(2)),isNaN(f)&&(f=0),e.abrupt("return",f);case 22:r++,e.next=4;break;case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"toFixed2",value:function(e){return e.toFixed(2)}},{key:"sumScore",value:function(e){e.length;var t=b.a.sumBy(e,"avg"),a=t/e.length;return a.toFixed(2)}}]),a}(p["b"]);m=Object(o["c"])([Object(p["a"])({components:{CardStats:f["a"]}})],m);var w=m,x=w,y=a("2877"),k=Object(y["a"])(x,r,n,!1,null,null,null);t["default"]=k.exports},"5d53":function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));a("4de4"),a("d81d"),a("b680"),a("96cf");var r=a("1da1"),n=a("d4ec"),s=a("bee2"),i=a("262e"),u=a("2caf"),c=a("9ab4"),l=a("8d27"),o=a("2ef0"),p=a.n(o),f=a("0613"),v=function(e){Object(i["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.doingUser=0,e.asignUser=0,e}return Object(s["a"])(a,[{key:"groupIssueRaw",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.doingUser=a,this.asignUser=r,n=t,e.next=5,p.a.chain(n).groupBy("issue").map((function(e,t){return{name:e[0].issue_name,group:t,value:h.getDataIssue(e)}})).value();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));function t(t,a,r){return e.apply(this,arguments)}return t}()},{key:"getDataIssue",value:function(e){for(var t=p()(e).groupBy("issueDetail").map((function(e,t){return{id:t,val:e}})).value(),a=[],r=0;r<t.length;r++){var n={name:t[r].val[0].issueDetail_name,issue_type:t[r].val[0].issue_type,choiceTypeData:t[r].val[0].choiceTypeData,length:t[r].val.length,default_val:t[r].val[0].value,notting:this.sumChoice(t[r].val,"น้อยที่สุดหรือไม่มีเลย",t[r].val.length),low:this.sumChoice(t[r].val,"น้อย",t[r].val.length),very:this.sumChoice(t[r].val,"มาก",t[r].val.length),many:this.sumChoice(t[r].val,"มากที่สุด",t[r].val.length),have:this.sumChoice(t[r].val,"มี",t[r].val.length),nohave:this.sumChoice(t[r].val,"ไม่มี",t[r].val.length),avg:0};if("ระดับ"==t[r].val[0].issue_type){var s=0;s="เชิงบวก"==n.choiceTypeData?(1*n.notting.raw+2*n.low.raw+3*n.very.raw+4*n.many.raw)/this.doingUser:(4*n.notting.raw+1*n.low.raw+2*n.very.raw+3*n.many.raw)/this.doingUser;var i=s/this.doingUser;n.avg=i>1?100*i/2:100*i}else if("เชิงบวก"==n.choiceTypeData){var u=1*n.nohave.raw+2*n.have.raw,c=u/this.doingUser;n.avg=c>1?100*c/2:100*c}else{var l=2*n.nohave.raw+1*n.have.raw,o=l/this.doingUser;n.avg=o>1?100*o/2:100*o}a.push(n)}return a}},{key:"sumChoice",value:function(e,t,a){var r=p.a.filter(e,{value_by:t});return{percent:(r.length/this.doingUser*100).toFixed(2),raw:r.length}}}]),a}(l["b"]);v=Object(c["c"])([Object(l["a"])({generateMutationSetters:!0})],v);var h=new v({store:f["a"],name:"Iit"})},b14a:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative flex flex-col min-w-0 break-words bg-white rounded-lg  shadow-xl mb-6 xl:mb-0 shadow-lg border-b-4 border-green-600"},[a("div",{staticClass:"flex-auto p-4"},[a("div",{staticClass:"flex flex-wrap"},[a("div",{staticClass:"relative w-full pr-4 max-w-full flex-grow flex-1"},[a("span",{staticClass:"font-semibold text-xl text-gray-800"},[e._v(" "+e._s(e.statTitle)+" ")]),a("h5",{staticClass:"text-gray-500 uppercase font-bold text-xs"},[e._v(" "+e._s(e.statSubtitle)+" ")]),a("div",{},[a("button",{staticClass:"mt-2 text-green-600 font-bold text-tiny",on:{click:function(t){return e.$router.push(e.statRoute)}}},[e._v("ดูรายระเอียด")])])]),a("div",{staticClass:"relative w-auto pl-4 flex-initial"},[a("div",{staticClass:"text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 shadow-lg rounded-full text-xl",class:[e.statIconColor]},[a("i",{class:[e.statIconName]})])])])])])},n=[],s=(a("c975"),{name:"card-stats",props:{statSubtitle:{type:String,default:"Traffic"},statArrow:{default:"up",validator:function(e){return-1!==["up","down"].indexOf(e)}},statPercent:{type:String,default:"3.48"},statPercentColor:{type:String,default:"text-green-500"},statTitle:{type:String,default:"350,897"},statDescripiron:{type:String,default:"Since last month"},statIconName:{type:String,default:"far fa-chart-bar"},statIconColor:{type:String,default:"bg-red-500"},statRoute:{type:String,default:"#"}}}),i=s,u=a("2877"),c=Object(u["a"])(i,r,n,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-2f269e50.bd4073c4.js.map